!function(e,t,n){function a(e){e&&!e.error?gapi.client.load("calendar","v3",function(){n.Calendar.Evt.trigger("haveAuthed")}):n.Calendar.Evt.trigger("shouldAuth")}var r="890138991807-okp2geobkejj9lngj22qcond9348pph8.apps.googleusercontent.com",i=["https://www.googleapis.com/auth/calendar"],o="primary",d="AIzaSyBultKZZsIiFj4QrUuavwsEH6yTCQEXACQ";n.Calendar=function(){},n.Calendar.Evt=$({}),n.Calendar.prototype.checkAuth=function(){gapi.client.setApiKey(d),gapi.auth.authorize({client_id:r,scope:i,immediate:!0},a)},n.Calendar.prototype.handleAuthClick=function(e){return gapi.auth.authorize({client_id:r,scope:i,immediate:!1},a),!1},n.Calendar.prototype.checkCookies=function(){var e=Cookies.get("PTC-eventid");if(!e)return!1;this.currentEventID=e;var t={calendarId:o,eventId:e};return this.getEvent(t),!0},n.Calendar.prototype.postAttendEvent=function(){var e=this,t=(new Date).toISOString(),n={calendarId:o,summary:"出勤",start:{dateTime:t},end:{dateTime:t}};e.postEvent(n)},n.Calendar.prototype.postLeaveEvent=function(){var e=this,t=(new Date).toISOString(),n=e.lastResponse;n.calendarId=o,n.eventId=e.currentEventID,n.end.dateTime=t,e.updateEvent(n)},n.Calendar.prototype.postEvent=function(e){var t=this,a=gapi.client.calendar.events.insert(e);a.execute(function(e){t.lastResponse=e,t.currentEventID=e.id,n.Calendar.Evt.trigger("posteventdone"),Cookies.set("PTC-eventid",t.currentEventID,{expires:3})})},n.Calendar.prototype.updateEvent=function(e){var t=this,a=gapi.client.calendar.events.update(e);a.execute(function(e){t.lastResponse=e,t.currentEventID=e.id,n.Calendar.Evt.trigger("updateeventdone"),Cookies.remove("PTC-eventid")})},n.Calendar.prototype.getEvent=function(e){var t=this,n=gapi.client.calendar.events.get(e);n.execute(function(e){t.lastResponse=e})},n.Calendar.getCalendarList=function(){var e=gapi.client.calendar.calendarList.list();e.execute(function(e){var t=e.items;for(var n in t)return"id:"+t[n].id+" summary:"+t[n].summary})}}(this,document,App);