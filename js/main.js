!function(n,e,t){function a(){o(),p.show()}function o(){var n=$(".modal_calendar-selecter");k.getCalendarList(function(){$(k.calendarList).each(function(e,t){var a=$("<li>");a.addClass("modal_calendar-selecter_item"),a.append("<span class='calendar_summary'>"+t.summary+"</span><br><span class='calendar_id'>"+t.id+"</span>"),n.append(a),a.on("click",function(){k.setCalendarId(t.id),p.fadeOut()})})})}function c(){h.fadeIn(),v.fadeOut(),m.fadeOut(),f.attr("href","./img/icon_auth.png")}function d(){h.fadeOut(),v.fadeIn(),m.fadeOut(),f.attr("href","./img/icon_attend.png")}function i(){h.fadeOut(),v.fadeOut(),m.fadeIn(),u("Now Working!"),f.attr("href","./img/icon_leave.png")}function u(n){l(),s.append(n+"<br>")}function l(){s.empty()}var f,r,s,p,h,v,m,k=($(n),new t.Util,new t.Calendar),g=!1;$(function(){f=$(".apple-touch-icon"),r=$(".setting"),s=$(".message"),p=$(".modal"),h=$(".authBtn"),v=$(".attendBtn"),m=$(".leaveBtn"),t.ua.isSP?$(".onlypc").remove():$(".onlysp").remove(),t.Calendar.Evt.on("haveAuthed",function(){h.fadeOut(),g=k.checkCookies(),g?i():d()}).on("shouldAuth",function(){c()}),h.on("click",k.handleAuthClick),v.on("click",function(){g||(k.postAttendEvent(),u("Do your best!"))}),t.Calendar.Evt.on("posteventdone",function(){g=!0,i()}),m.on("click",function(){g&&(k.postLeaveEvent(),u("Good work!"))}),t.Calendar.Evt.on("updateeventdone",function(){g=!1,d(),l()}),r.on("click",function(){a()})}),n.apionload=function(){k.checkAuth()},n.dev={}}(this,document,App);