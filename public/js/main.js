!function(n,t,e){function a(){o(),p.show()}function o(){var n=$(".modal_calendar-selecter");g.getCalendarList(function(){$(g.calendarList).each(function(t,e){var a=$("<li>");a.addClass("modal_calendar-selecter_item"),a.append("<span class='calendar_summary'>"+e.summary+"</span><br><span class='calendar_id'>"+e.id+"</span>"),n.append(a),a.on("click",function(){g.setCalendarId(e.id),p.fadeOut()})})})}function i(){f(),v.fadeIn(function(){w=!1}),h.fadeOut(),m.fadeOut(),l.attr("href","./img/icon_auth.png")}function c(){f(),v.fadeOut(),h.fadeIn(function(){w=!1}),m.fadeOut(),l.attr("href","./img/icon_attend.png")}function d(){f(),v.fadeOut(),h.fadeOut(),m.fadeIn(function(){w=!1}),u("Now Working!"),l.attr("href","./img/icon_leave.png")}function u(n){f(),s.append(n+"<br>")}function f(){s.empty()}var l,r,s,p,v,h,m,g=($(n),new e.Util,new e.Calendar),k=!1,w=!1;$(function(){l=$(".apple-touch-icon"),r=$(".setting"),s=$(".message"),p=$(".modal"),v=$(".authBtn"),h=$(".attendBtn"),m=$(".leaveBtn"),e.ua.isSP?$(".onlypc").remove():$(".onlysp").remove(),r.on("click",function(){a()}),v.on("click",function(n){return w?void u("Please wait..."):(w=!0,f(),void g.handleAuthClick(n))}),h.on("click",function(){return w||k?void u("Please wait..."):(w=!0,g.postAttendEvent(),void u("Do your best!"))}),m.on("click",function(){return w||!k?void u("Please wait..."):(w=!0,g.postLeaveEvent(),void u("Good work!"))})}),n.apionload=function(){g.checkAuth()},e.Calendar.Evt.on("haveAuthed",function(){g.checkIsWorking(function(n){k=n,k?d():c()})}).on("shouldAuth",function(){i()}),e.Calendar.Evt.on("posteventdone",function(){k=!0,d()}),e.Calendar.Evt.on("updateeventdone",function(){k=!1,c()}),n.dev={}}(this,document,App);