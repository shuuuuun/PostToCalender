!function(e,t,n){function a(e){var t=$(".authBtn");e&&!e.error?(t.hide(),gapi.client.load("calendar","v3",n.Calendar.printCalendarList)):t.show()}var r="890138991807-okp2geobkejj9lngj22qcond9348pph8.apps.googleusercontent.com",i=["https://www.googleapis.com/auth/calendar"],o="primary",d="AIzaSyBultKZZsIiFj4QrUuavwsEH6yTCQEXACQ";n.Calendar=function(){this.Evt=$({})},n.Calendar.prototype.checkAuth=function(){gapi.client.setApiKey(d),gapi.auth.authorize({client_id:r,scope:i,immediate:!0},a)},n.Calendar.prototype.handleAuthClick=function(e){return gapi.auth.authorize({client_id:r,scope:i,immediate:!1},a),!1},n.Calendar.prototype.postAttendEvent=function(){var e=this,t=(new Date).toISOString(),n={calendarId:o,summary:"出勤",start:{dateTime:t},end:{dateTime:t}};e.postEvent(n)},n.Calendar.prototype.postLeaveEvent=function(){var e=this,t=(new Date).toISOString(),n=e.lastResponse;n.calendarId=o,n.eventId=e.currentEventID,n.end.dateTime=t,e.updateEvent(n)},n.Calendar.prototype.postEvent=function(e){var t=this,n=gapi.client.calendar.events.insert(e);n.execute(function(e){t.lastResponse=e,t.currentEventID=e.id,t.Evt.trigger("posteventdone")})},n.Calendar.prototype.updateEvent=function(e){var t=this,n=gapi.client.calendar.events.update(e);n.execute(function(e){t.lastResponse=e,t.currentEventID=e.id,t.Evt.trigger("updateeventdone")})},n.Calendar.getCalendarList=function(){var e=(n.Calendar,gapi.client.calendar.calendarList.list());e.execute(function(e){var t=e.items;for(var n in t)return"id:"+t[n].id+" summary:"+t[n].summary})},n.Calendar.printMsg=function(e){var t=$(".message");t.append(e+"<br>")}}(this,document,App);